---
output: html_document
---

## CodeBook
Last updated on Fri Nov 14 23:46:17 2014 by Sarah Huang

***

### A look at the tidy dataset generated by <span style="color:blue">run_analysis.R</span>

***



```r
mergedDataTidy[1:10,]
```

```
##    subject activity domain    instrument acceleration jerk magnitude axis
## 1        1   LAYING   Freq Accelerometer         Body <NA>      <NA>    X
## 2        1   LAYING   Freq Accelerometer         Body <NA>      <NA>    X
## 3        1   LAYING   Freq Accelerometer         Body <NA>      <NA>    Y
## 4        1   LAYING   Freq Accelerometer         Body <NA>      <NA>    Y
## 5        1   LAYING   Freq Accelerometer         Body <NA>      <NA>    Z
## 6        1   LAYING   Freq Accelerometer         Body <NA>      <NA>    Z
## 7        1   LAYING   Freq Accelerometer         Body <NA> Magnitude <NA>
## 8        1   LAYING   Freq Accelerometer         Body <NA> Magnitude <NA>
## 9        1   LAYING   Freq Accelerometer         Body Jerk      <NA>    X
## 10       1   LAYING   Freq Accelerometer         Body Jerk      <NA>    X
##            statistics number_of_measurement average
## 1                Mean                    50 -0.9391
## 2  Standard Deviation                    50 -0.9244
## 3                Mean                    50 -0.8671
## 4  Standard Deviation                    50 -0.8336
## 5                Mean                    50 -0.8827
## 6  Standard Deviation                    50 -0.8129
## 7                Mean                    50 -0.8618
## 8  Standard Deviation                    50 -0.7983
## 9                Mean                    50 -0.9571
## 10 Standard Deviation                    50 -0.9642
```

***

Variables  | Description | Value
------------- | ------------- | -------------
subject  | subject identifiers. | 1 - 30
activity  | activity names | LAYING, SITTING, STANDING, WALKING, WALKING_DOWNSTAIRS, WALKING_UPSTAIRS
domain | signal obtained in time domain or frequency domain? | Freq, Time
instrument | signal obtained from accelerometer or gyroscope? | Accelerometer, Gyroscope
acceleration | gravitational or body motion components of the signal? | Body, Gravity
jerk | jerk signal calculated? | NA, Jerk
magnitude | magnitude calculated? | NA, Magnitude
axis | which of the 3-axial measurement? | X, Y, Z, NA
statistics | mean or standard deviation calculated? | Mean, Standard Deviation
number_of_measurement | count of data points used to calculate each average | see data structure below for examples
average | mean value of each possible feature combination for each subject and each activity | see data structure below for examples

***

##### Data structure

```
## Classes 'data.table' and 'data.frame':	11880 obs. of  11 variables:
##  $ subject              : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ activity             : chr  "LAYING" "LAYING" "LAYING" "LAYING" ...
##  $ domain               : chr  "Freq" "Freq" "Freq" "Freq" ...
##  $ instrument           : chr  "Accelerometer" "Accelerometer" "Accelerometer" "Accelerometer" ...
##  $ acceleration         : chr  "Body" "Body" "Body" "Body" ...
##  $ jerk                 : chr  NA NA NA NA ...
##  $ magnitude            : chr  NA NA NA NA ...
##  $ axis                 : chr  "X" "X" "Y" "Y" ...
##  $ statistics           : chr  "Mean" "Standard Deviation" "Mean" "Standard Deviation" ...
##  $ number_of_measurement: int  50 50 50 50 50 50 50 50 50 50 ...
##  $ average              : num  -0.939 -0.924 -0.867 -0.834 -0.883 ...
##  - attr(*, "sorted")= chr  "subject" "activity" "domain" "instrument" ...
##  - attr(*, ".internal.selfref")=<externalptr>
```

***

### Information on the raw dataset

***

Can be found in the raw-data folder "UCI HAR Data". See files *features_info.txt* and *README*.

***

### Transform the original raw data to tidy data

***

#### Before importing the data

***

**Load the packages.**

```r
packages <- c("data.table", "reshape2")
sapply(packages, require, character.only = TRUE, quietly = TRUE)
```

```
## data.table 1.9.4  For help type: ?data.table
## *** NB: by=.EACHI is now explicit. See README to restore previous behaviour.
```

```
## data.table   reshape2 
##       TRUE       TRUE
```

***

**Set the working directory**.

```r
setwd("C:/Users/Sarah/Documents/Sarah/DataScience_Courses_JHU/GettingAndCleaningData/Project")
```

***

#### Import the raw data

***


```r
url <- "https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip"
download.file(url, "dataset.zip", mode = "wb")
unzip("dataset.zip")
```

This creates a folder "UCI HAR Dataset" containing all the raw data.

***

#### Read the data files into R objects

***


```r
path <- file.path(getwd(), "UCI HAR Dataset")

subjectTrain <- fread(file.path(path, "train", "subject_train.txt"))
trainingSet <- data.table(read.table(file.path(path, "train", "X_train.txt")))
activityTrain <- fread(file.path(path, "train", "y_train.txt"))

subjectTest <- fread(file.path(path, "test", "subject_test.txt"))
testSet <- data.table(read.table(file.path(path, "test", "X_test.txt")))
activityTest <- fread(file.path(path, "test", "y_test.txt"))
```

***

#### Merge the training data and test data to create one dataset

***


```r
mergedTrain <- cbind(subjectTrain, activityTrain, trainingSet)
setnames(mergedTrain, 1:2, c("subject", "activity"))

mergedTest <- cbind(subjectTest, activityTest, testSet)
setnames(mergedTest, 1:2, c("subject", "activity"))

mergedData <- rbind(mergedTrain, mergedTest)
```

The dataset structure is shown below.


```r
str(mergedData)
```

```
## Classes 'data.table' and 'data.frame':	10299 obs. of  563 variables:
##  $ subject : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ activity: int  5 5 5 5 5 5 5 5 5 5 ...
##  $ V1      : num  0.289 0.278 0.28 0.279 0.277 ...
##  $ V2      : num  -0.0203 -0.0164 -0.0195 -0.0262 -0.0166 ...
##  $ V3      : num  -0.133 -0.124 -0.113 -0.123 -0.115 ...
##  $ V4      : num  -0.995 -0.998 -0.995 -0.996 -0.998 ...
##  $ V5      : num  -0.983 -0.975 -0.967 -0.983 -0.981 ...
##  $ V6      : num  -0.914 -0.96 -0.979 -0.991 -0.99 ...
##  $ V7      : num  -0.995 -0.999 -0.997 -0.997 -0.998 ...
##  $ V8      : num  -0.983 -0.975 -0.964 -0.983 -0.98 ...
##  $ V9      : num  -0.924 -0.958 -0.977 -0.989 -0.99 ...
##  $ V10     : num  -0.935 -0.943 -0.939 -0.939 -0.942 ...
##  $ V11     : num  -0.567 -0.558 -0.558 -0.576 -0.569 ...
##  $ V12     : num  -0.744 -0.818 -0.818 -0.83 -0.825 ...
##  $ V13     : num  0.853 0.849 0.844 0.844 0.849 ...
##  $ V14     : num  0.686 0.686 0.682 0.682 0.683 ...
##  $ V15     : num  0.814 0.823 0.839 0.838 0.838 ...
##  $ V16     : num  -0.966 -0.982 -0.983 -0.986 -0.993 ...
##  $ V17     : num  -1 -1 -1 -1 -1 ...
##  $ V18     : num  -1 -1 -1 -1 -1 ...
##  $ V19     : num  -0.995 -0.998 -0.999 -1 -1 ...
##  $ V20     : num  -0.994 -0.999 -0.997 -0.997 -0.998 ...
##  $ V21     : num  -0.988 -0.978 -0.965 -0.984 -0.981 ...
##  $ V22     : num  -0.943 -0.948 -0.975 -0.986 -0.991 ...
##  $ V23     : num  -0.408 -0.715 -0.592 -0.627 -0.787 ...
##  $ V24     : num  -0.679 -0.501 -0.486 -0.851 -0.559 ...
##  $ V25     : num  -0.602 -0.571 -0.571 -0.912 -0.761 ...
##  $ V26     : num  0.9293 0.6116 0.273 0.0614 0.3133 ...
##  $ V27     : num  -0.853 -0.3295 -0.0863 0.0748 -0.1312 ...
##  $ V28     : num  0.36 0.284 0.337 0.198 0.191 ...
##  $ V29     : num  -0.0585 0.2846 -0.1647 -0.2643 0.0869 ...
##  $ V30     : num  0.2569 0.1157 0.0172 0.0725 0.2576 ...
##  $ V31     : num  -0.2248 -0.091 -0.0745 -0.1553 -0.2725 ...
##  $ V32     : num  0.264 0.294 0.342 0.323 0.435 ...
##  $ V33     : num  -0.0952 -0.2812 -0.3326 -0.1708 -0.3154 ...
##  $ V34     : num  0.279 0.086 0.239 0.295 0.44 ...
##  $ V35     : num  -0.4651 -0.0222 -0.1362 -0.3061 -0.2691 ...
##  $ V36     : num  0.4919 -0.0167 0.1739 0.4821 0.1794 ...
##  $ V37     : num  -0.191 -0.221 -0.299 -0.47 -0.089 ...
##  $ V38     : num  0.3763 -0.0134 -0.1247 -0.3057 -0.1558 ...
##  $ V39     : num  0.4351 -0.0727 -0.1811 -0.3627 -0.1898 ...
##  $ V40     : num  0.661 0.579 0.609 0.507 0.599 ...
##  $ V41     : num  0.963 0.967 0.967 0.968 0.968 ...
##  $ V42     : num  -0.141 -0.142 -0.142 -0.144 -0.149 ...
##  $ V43     : num  0.1154 0.1094 0.1019 0.0999 0.0945 ...
##  $ V44     : num  -0.985 -0.997 -1 -0.997 -0.998 ...
##  $ V45     : num  -0.982 -0.989 -0.993 -0.981 -0.988 ...
##  $ V46     : num  -0.878 -0.932 -0.993 -0.978 -0.979 ...
##  $ V47     : num  -0.985 -0.998 -1 -0.996 -0.998 ...
##  $ V48     : num  -0.984 -0.99 -0.993 -0.981 -0.989 ...
##  $ V49     : num  -0.895 -0.933 -0.993 -0.978 -0.979 ...
##  $ V50     : num  0.892 0.892 0.892 0.894 0.894 ...
##  $ V51     : num  -0.161 -0.161 -0.164 -0.164 -0.167 ...
##  $ V52     : num  0.1247 0.1226 0.0946 0.0934 0.0917 ...
##  $ V53     : num  0.977 0.985 0.987 0.987 0.987 ...
##  $ V54     : num  -0.123 -0.115 -0.115 -0.121 -0.122 ...
##  $ V55     : num  0.0565 0.1028 0.1028 0.0958 0.0941 ...
##  $ V56     : num  -0.375 -0.383 -0.402 -0.4 -0.4 ...
##  $ V57     : num  0.899 0.908 0.909 0.911 0.912 ...
##  $ V58     : num  -0.971 -0.971 -0.97 -0.969 -0.967 ...
##  $ V59     : num  -0.976 -0.979 -0.982 -0.982 -0.984 ...
##  $ V60     : num  -0.984 -0.999 -1 -0.996 -0.998 ...
##  $ V61     : num  -0.989 -0.99 -0.992 -0.981 -0.991 ...
##  $ V62     : num  -0.918 -0.942 -0.993 -0.98 -0.98 ...
##  $ V63     : num  -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 ...
##  $ V64     : num  -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 ...
##  $ V65     : num  0.114 -0.21 -0.927 -0.596 -0.617 ...
##  $ V66     : num  -0.59042 -0.41006 0.00223 -0.06493 -0.25727 ...
##  $ V67     : num  0.5911 0.4139 0.0275 0.0754 0.2689 ...
##  $ V68     : num  -0.5918 -0.4176 -0.0567 -0.0858 -0.2807 ...
##  $ V69     : num  0.5925 0.4213 0.0855 0.0962 0.2926 ...
##  $ V70     : num  -0.745 -0.196 -0.329 -0.295 -0.167 ...
##  $ V71     : num  0.7209 0.1253 0.2705 0.2283 0.0899 ...
##  $ V72     : num  -0.7124 -0.1056 -0.2545 -0.2063 -0.0663 ...
##  $ V73     : num  0.7113 0.1091 0.2576 0.2048 0.0671 ...
##  $ V74     : num  -0.995 -0.834 -0.705 -0.385 -0.237 ...
##  $ V75     : num  0.996 0.834 0.714 0.386 0.239 ...
##  $ V76     : num  -0.996 -0.834 -0.723 -0.387 -0.241 ...
##  $ V77     : num  0.992 0.83 0.729 0.385 0.241 ...
##  $ V78     : num  0.57 -0.831 -0.181 -0.991 -0.408 ...
##  $ V79     : num  0.439 -0.866 0.338 -0.969 -0.185 ...
##  $ V80     : num  0.987 0.974 0.643 0.984 0.965 ...
##  $ V81     : num  0.078 0.074 0.0736 0.0773 0.0734 ...
##  $ V82     : num  0.005 0.00577 0.0031 0.02006 0.01912 ...
##  $ V83     : num  -0.06783 0.02938 -0.00905 -0.00986 0.01678 ...
##  $ V84     : num  -0.994 -0.996 -0.991 -0.993 -0.996 ...
##  $ V85     : num  -0.988 -0.981 -0.981 -0.988 -0.988 ...
##  $ V86     : num  -0.994 -0.992 -0.99 -0.993 -0.992 ...
##  $ V87     : num  -0.994 -0.996 -0.991 -0.994 -0.997 ...
##  $ V88     : num  -0.986 -0.979 -0.979 -0.986 -0.987 ...
##  $ V89     : num  -0.993 -0.991 -0.987 -0.991 -0.991 ...
##  $ V90     : num  -0.985 -0.995 -0.987 -0.987 -0.997 ...
##  $ V91     : num  -0.992 -0.979 -0.979 -0.992 -0.992 ...
##  $ V92     : num  -0.993 -0.992 -0.992 -0.99 -0.99 ...
##  $ V93     : num  0.99 0.993 0.988 0.988 0.994 ...
##  $ V94     : num  0.992 0.992 0.992 0.993 0.993 ...
##  $ V95     : num  0.991 0.989 0.989 0.993 0.986 ...
##  $ V96     : num  -0.994 -0.991 -0.988 -0.993 -0.994 ...
##  $ V97     : num  -1 -1 -1 -1 -1 ...
##   [list output truncated]
##  - attr(*, ".internal.selfref")=<externalptr>
```

***

#### Extract measurements on the mean and standard deviation

***

**Read the "features" file**

This file will be used to set the descriptive variable names for the dataset


```r
features <- fread(file.path(path, "features.txt"))
setnames(features, 1:2, c("featureNum", "featureName"))
```

```r
features
```

```
##      featureNum                          featureName
##   1:          1                    tBodyAcc-mean()-X
##   2:          2                    tBodyAcc-mean()-Y
##   3:          3                    tBodyAcc-mean()-Z
##   4:          4                     tBodyAcc-std()-X
##   5:          5                     tBodyAcc-std()-Y
##  ---                                                
## 557:        557     angle(tBodyGyroMean,gravityMean)
## 558:        558 angle(tBodyGyroJerkMean,gravityMean)
## 559:        559                 angle(X,gravityMean)
## 560:        560                 angle(Y,gravityMean)
## 561:        561                 angle(Z,gravityMean)
```

***

**Subset the features** by selecting only measurements on the mean and standard deviation

A new column "featureCode" is added to match the variable names in the dataset "mergedData".
The feature vector is now reduced to 66 elements from the original 561.

***


```r
features <- features[grepl("mean\\(\\)|std\\(\\)", features$featureName)]
features <- features[, featureCode:=paste0("V", featureNum)]
```

```r
features
```

```
##     featureNum                 featureName featureCode
##  1:          1           tBodyAcc-mean()-X          V1
##  2:          2           tBodyAcc-mean()-Y          V2
##  3:          3           tBodyAcc-mean()-Z          V3
##  4:          4            tBodyAcc-std()-X          V4
##  5:          5            tBodyAcc-std()-Y          V5
##  6:          6            tBodyAcc-std()-Z          V6
##  7:         41        tGravityAcc-mean()-X         V41
##  8:         42        tGravityAcc-mean()-Y         V42
##  9:         43        tGravityAcc-mean()-Z         V43
## 10:         44         tGravityAcc-std()-X         V44
## 11:         45         tGravityAcc-std()-Y         V45
## 12:         46         tGravityAcc-std()-Z         V46
## 13:         81       tBodyAccJerk-mean()-X         V81
## 14:         82       tBodyAccJerk-mean()-Y         V82
## 15:         83       tBodyAccJerk-mean()-Z         V83
## 16:         84        tBodyAccJerk-std()-X         V84
## 17:         85        tBodyAccJerk-std()-Y         V85
## 18:         86        tBodyAccJerk-std()-Z         V86
## 19:        121          tBodyGyro-mean()-X        V121
## 20:        122          tBodyGyro-mean()-Y        V122
## 21:        123          tBodyGyro-mean()-Z        V123
## 22:        124           tBodyGyro-std()-X        V124
## 23:        125           tBodyGyro-std()-Y        V125
## 24:        126           tBodyGyro-std()-Z        V126
## 25:        161      tBodyGyroJerk-mean()-X        V161
## 26:        162      tBodyGyroJerk-mean()-Y        V162
## 27:        163      tBodyGyroJerk-mean()-Z        V163
## 28:        164       tBodyGyroJerk-std()-X        V164
## 29:        165       tBodyGyroJerk-std()-Y        V165
## 30:        166       tBodyGyroJerk-std()-Z        V166
## 31:        201          tBodyAccMag-mean()        V201
## 32:        202           tBodyAccMag-std()        V202
## 33:        214       tGravityAccMag-mean()        V214
## 34:        215        tGravityAccMag-std()        V215
## 35:        227      tBodyAccJerkMag-mean()        V227
## 36:        228       tBodyAccJerkMag-std()        V228
## 37:        240         tBodyGyroMag-mean()        V240
## 38:        241          tBodyGyroMag-std()        V241
## 39:        253     tBodyGyroJerkMag-mean()        V253
## 40:        254      tBodyGyroJerkMag-std()        V254
## 41:        266           fBodyAcc-mean()-X        V266
## 42:        267           fBodyAcc-mean()-Y        V267
## 43:        268           fBodyAcc-mean()-Z        V268
## 44:        269            fBodyAcc-std()-X        V269
## 45:        270            fBodyAcc-std()-Y        V270
## 46:        271            fBodyAcc-std()-Z        V271
## 47:        345       fBodyAccJerk-mean()-X        V345
## 48:        346       fBodyAccJerk-mean()-Y        V346
## 49:        347       fBodyAccJerk-mean()-Z        V347
## 50:        348        fBodyAccJerk-std()-X        V348
## 51:        349        fBodyAccJerk-std()-Y        V349
## 52:        350        fBodyAccJerk-std()-Z        V350
## 53:        424          fBodyGyro-mean()-X        V424
## 54:        425          fBodyGyro-mean()-Y        V425
## 55:        426          fBodyGyro-mean()-Z        V426
## 56:        427           fBodyGyro-std()-X        V427
## 57:        428           fBodyGyro-std()-Y        V428
## 58:        429           fBodyGyro-std()-Z        V429
## 59:        503          fBodyAccMag-mean()        V503
## 60:        504           fBodyAccMag-std()        V504
## 61:        516  fBodyBodyAccJerkMag-mean()        V516
## 62:        517   fBodyBodyAccJerkMag-std()        V517
## 63:        529     fBodyBodyGyroMag-mean()        V529
## 64:        530      fBodyBodyGyroMag-std()        V530
## 65:        542 fBodyBodyGyroJerkMag-mean()        V542
## 66:        543  fBodyBodyGyroJerkMag-std()        V543
##     featureNum                 featureName featureCode
```

***

**Subset the dataset's feature variables** with only measurements on the mean and standard deviation

***


```r
select <- c("subject", "activity", features$featureCode)
mergedData <- mergedData[, select, with = FALSE]
```

```r
str(mergedData)
```

```
## Classes 'data.table' and 'data.frame':	10299 obs. of  68 variables:
##  $ subject : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ activity: int  5 5 5 5 5 5 5 5 5 5 ...
##  $ V1      : num  0.289 0.278 0.28 0.279 0.277 ...
##  $ V2      : num  -0.0203 -0.0164 -0.0195 -0.0262 -0.0166 ...
##  $ V3      : num  -0.133 -0.124 -0.113 -0.123 -0.115 ...
##  $ V4      : num  -0.995 -0.998 -0.995 -0.996 -0.998 ...
##  $ V5      : num  -0.983 -0.975 -0.967 -0.983 -0.981 ...
##  $ V6      : num  -0.914 -0.96 -0.979 -0.991 -0.99 ...
##  $ V41     : num  0.963 0.967 0.967 0.968 0.968 ...
##  $ V42     : num  -0.141 -0.142 -0.142 -0.144 -0.149 ...
##  $ V43     : num  0.1154 0.1094 0.1019 0.0999 0.0945 ...
##  $ V44     : num  -0.985 -0.997 -1 -0.997 -0.998 ...
##  $ V45     : num  -0.982 -0.989 -0.993 -0.981 -0.988 ...
##  $ V46     : num  -0.878 -0.932 -0.993 -0.978 -0.979 ...
##  $ V81     : num  0.078 0.074 0.0736 0.0773 0.0734 ...
##  $ V82     : num  0.005 0.00577 0.0031 0.02006 0.01912 ...
##  $ V83     : num  -0.06783 0.02938 -0.00905 -0.00986 0.01678 ...
##  $ V84     : num  -0.994 -0.996 -0.991 -0.993 -0.996 ...
##  $ V85     : num  -0.988 -0.981 -0.981 -0.988 -0.988 ...
##  $ V86     : num  -0.994 -0.992 -0.99 -0.993 -0.992 ...
##  $ V121    : num  -0.0061 -0.0161 -0.0317 -0.0434 -0.034 ...
##  $ V122    : num  -0.0314 -0.0839 -0.1023 -0.0914 -0.0747 ...
##  $ V123    : num  0.1077 0.1006 0.0961 0.0855 0.0774 ...
##  $ V124    : num  -0.985 -0.983 -0.976 -0.991 -0.985 ...
##  $ V125    : num  -0.977 -0.989 -0.994 -0.992 -0.992 ...
##  $ V126    : num  -0.992 -0.989 -0.986 -0.988 -0.987 ...
##  $ V161    : num  -0.0992 -0.1105 -0.1085 -0.0912 -0.0908 ...
##  $ V162    : num  -0.0555 -0.0448 -0.0424 -0.0363 -0.0376 ...
##  $ V163    : num  -0.062 -0.0592 -0.0558 -0.0605 -0.0583 ...
##  $ V164    : num  -0.992 -0.99 -0.988 -0.991 -0.991 ...
##  $ V165    : num  -0.993 -0.997 -0.996 -0.997 -0.996 ...
##  $ V166    : num  -0.992 -0.994 -0.992 -0.993 -0.995 ...
##  $ V201    : num  -0.959 -0.979 -0.984 -0.987 -0.993 ...
##  $ V202    : num  -0.951 -0.976 -0.988 -0.986 -0.991 ...
##  $ V214    : num  -0.959 -0.979 -0.984 -0.987 -0.993 ...
##  $ V215    : num  -0.951 -0.976 -0.988 -0.986 -0.991 ...
##  $ V227    : num  -0.993 -0.991 -0.989 -0.993 -0.993 ...
##  $ V228    : num  -0.994 -0.992 -0.99 -0.993 -0.996 ...
##  $ V240    : num  -0.969 -0.981 -0.976 -0.982 -0.985 ...
##  $ V241    : num  -0.964 -0.984 -0.986 -0.987 -0.989 ...
##  $ V253    : num  -0.994 -0.995 -0.993 -0.996 -0.996 ...
##  $ V254    : num  -0.991 -0.996 -0.995 -0.995 -0.995 ...
##  $ V266    : num  -0.995 -0.997 -0.994 -0.995 -0.997 ...
##  $ V267    : num  -0.983 -0.977 -0.973 -0.984 -0.982 ...
##  $ V268    : num  -0.939 -0.974 -0.983 -0.991 -0.988 ...
##  $ V269    : num  -0.995 -0.999 -0.996 -0.996 -0.999 ...
##  $ V270    : num  -0.983 -0.975 -0.966 -0.983 -0.98 ...
##  $ V271    : num  -0.906 -0.955 -0.977 -0.99 -0.992 ...
##  $ V345    : num  -0.992 -0.995 -0.991 -0.994 -0.996 ...
##  $ V346    : num  -0.987 -0.981 -0.982 -0.989 -0.989 ...
##  $ V347    : num  -0.99 -0.99 -0.988 -0.991 -0.991 ...
##  $ V348    : num  -0.996 -0.997 -0.991 -0.991 -0.997 ...
##  $ V349    : num  -0.991 -0.982 -0.981 -0.987 -0.989 ...
##  $ V350    : num  -0.997 -0.993 -0.99 -0.994 -0.993 ...
##  $ V424    : num  -0.987 -0.977 -0.975 -0.987 -0.982 ...
##  $ V425    : num  -0.982 -0.993 -0.994 -0.994 -0.993 ...
##  $ V426    : num  -0.99 -0.99 -0.987 -0.987 -0.989 ...
##  $ V427    : num  -0.985 -0.985 -0.977 -0.993 -0.986 ...
##  $ V428    : num  -0.974 -0.987 -0.993 -0.992 -0.992 ...
##  $ V429    : num  -0.994 -0.99 -0.987 -0.989 -0.988 ...
##  $ V503    : num  -0.952 -0.981 -0.988 -0.988 -0.994 ...
##  $ V504    : num  -0.956 -0.976 -0.989 -0.987 -0.99 ...
##  $ V516    : num  -0.994 -0.99 -0.989 -0.993 -0.996 ...
##  $ V517    : num  -0.994 -0.992 -0.991 -0.992 -0.994 ...
##  $ V529    : num  -0.98 -0.988 -0.989 -0.989 -0.991 ...
##  $ V530    : num  -0.961 -0.983 -0.986 -0.988 -0.989 ...
##  $ V542    : num  -0.992 -0.996 -0.995 -0.995 -0.995 ...
##  $ V543    : num  -0.991 -0.996 -0.995 -0.995 -0.995 ...
##  - attr(*, ".internal.selfref")=<externalptr>
```
***

#### Use descriptive activity names to name the activities

***

**Read the activity file**


```r
activityLabels <- fread(file.path(path, "activity_labels.txt"))
setnames(activityLabels, 1:2, c("activity", "activityName"))
```

```r
activityLabels
```

```
##    activity       activityName
## 1:        1            WALKING
## 2:        2   WALKING_UPSTAIRS
## 3:        3 WALKING_DOWNSTAIRS
## 4:        4            SITTING
## 5:        5           STANDING
## 6:        6             LAYING
```

**Merge activityLabels with dataset**


```r
mergedData <- merge(activityLabels, mergedData, by="activity", all.y=TRUE)
```

```r
mergedData
```

```
##        activity activityName subject     V1        V2       V3      V4
##     1:        1      WALKING       1 0.2820 -0.037696 -0.13490 -0.3283
##     2:        1      WALKING       1 0.2558 -0.064550 -0.09519 -0.2292
##     3:        1      WALKING       1 0.2549  0.003815 -0.12366 -0.2752
##     4:        1      WALKING       1 0.3434 -0.014446 -0.16738 -0.2299
##     5:        1      WALKING       1 0.2762 -0.029638 -0.14262 -0.2266
##    ---                                                                
## 10295:        6       LAYING      24 0.2609 -0.017322 -0.10301 -0.9887
## 10296:        6       LAYING      24 0.2842 -0.018150 -0.10983 -0.9792
## 10297:        6       LAYING      24 0.2885 -0.016603 -0.11479 -0.9793
## 10298:        6       LAYING      24 0.2549 -0.017042 -0.10342 -0.9865
## 10299:        6       LAYING      24 0.2705 -0.017184 -0.10674 -0.9795
##              V5      V6     V41     V42      V43     V44     V45     V46
##     1: -0.13715 -0.1891  0.9453 -0.2459 -0.03216 -0.9840 -0.9289 -0.9326
##     2:  0.01651 -0.2603  0.9411 -0.2520 -0.03288 -0.9840 -0.9175 -0.9491
##     3:  0.01308 -0.2844  0.9464 -0.2643 -0.02558 -0.9628 -0.9561 -0.9719
##     4:  0.17391 -0.2134  0.9524 -0.2598 -0.02613 -0.9811 -0.9644 -0.9643
##     5:  0.16429 -0.1225  0.9471 -0.2571 -0.02842 -0.9769 -0.9886 -0.9604
##    ---                                                                  
## 10295: -0.99093 -0.9891 -0.2536  0.7478  0.66240 -0.9847 -0.9981 -0.9935
## 10296: -0.98931 -0.9791 -0.2580  0.7478  0.66377 -0.9811 -0.9986 -0.9887
## 10297: -0.98757 -0.9838 -0.2564  0.7474  0.66311 -0.9758 -0.9991 -0.9832
## 10298: -0.98894 -0.9900 -0.2540  0.7476  0.66097 -0.9804 -0.9985 -0.9900
## 10299: -0.98884 -0.9872 -0.2599  0.7476  0.66230 -0.9787 -0.9986 -0.9895
##             V81       V82       V83     V84      V85     V86      V121
##     1: -0.15649 -0.142853 -0.113079 -0.1838 -0.17046 -0.6138 -0.479730
##     2: -0.20755  0.357843 -0.452401 -0.1084 -0.01869 -0.5476  0.094091
##     3:  0.20160  0.417082  0.139078 -0.1777 -0.02960 -0.5795  0.211201
##     4:  0.33608 -0.464144 -0.005026 -0.1205  0.02866 -0.5215  0.096082
##     5: -0.23562 -0.111777  0.172655 -0.1924  0.05398 -0.4693  0.008742
##    ---                                                                
## 10295:  0.07362  0.008726  0.005088 -0.9894 -0.98726 -0.9909 -0.028800
## 10296:  0.08270  0.020530 -0.005393 -0.9878 -0.98230 -0.9883 -0.027928
## 10297:  0.07114  0.016184 -0.004438 -0.9877 -0.98261 -0.9910 -0.027629
## 10298:  0.07750  0.003795  0.006643 -0.9890 -0.98696 -0.9936 -0.028801
## 10299:  0.07728  0.007349 -0.002991 -0.9903 -0.98219 -0.9897 -0.027950
##            V122     V123    V124     V125    V126     V161     V162
##     1:  0.08203 0.256443 -0.3235 -0.14194 -0.4566  0.09425 -0.47621
##     2: -0.30915 0.086441 -0.3993 -0.08842 -0.4022  0.16674 -0.03380
##     3: -0.27291 0.101986 -0.4454 -0.06308 -0.3471 -0.16323 -0.00556
##     4: -0.16339 0.025859 -0.3604  0.04233 -0.2761 -0.05463  0.34029
##     5:  0.01166 0.004175 -0.3776  0.13372 -0.3081 -0.07567  0.17147
##    ---                                                             
## 10295: -0.05654 0.087262 -0.9938 -0.98429 -0.9968 -0.09770 -0.04622
## 10296: -0.08138 0.087231 -0.9924 -0.97648 -0.9960 -0.09700 -0.03599
## 10297: -0.06972 0.086456 -0.9905 -0.97531 -0.9962 -0.09898 -0.03347
## 10298: -0.06642 0.089199 -0.9916 -0.97440 -0.9974 -0.09788 -0.05344
## 10299: -0.07382 0.086261 -0.9919 -0.96909 -0.9974 -0.09848 -0.04041
##            V163    V164    V165    V166     V201    V202     V214    V215
##     1: -0.14213 -0.3457 -0.4867 -0.4215 -0.22456 -0.2380 -0.22456 -0.2380
##     2: -0.08926 -0.2499 -0.4537 -0.3698 -0.12650 -0.2134 -0.12650 -0.2134
##     3: -0.23155 -0.2642 -0.4247 -0.3425 -0.16010 -0.2576 -0.16010 -0.2576
##     4: -0.26967 -0.1021 -0.2434 -0.3116 -0.07351 -0.1951 -0.07351 -0.1951
##     5:  0.13645 -0.1291 -0.1901 -0.4183 -0.04949 -0.2110 -0.04949 -0.2110
##    ---                                                                   
## 10295: -0.05506 -0.9855 -0.9875 -0.9949 -0.98884 -0.9918 -0.98884 -0.9918
## 10296: -0.05730 -0.9829 -0.9830 -0.9937 -0.98175 -0.9874 -0.98175 -0.9874
## 10297: -0.05350 -0.9797 -0.9842 -0.9945 -0.98244 -0.9854 -0.98244 -0.9854
## 10298: -0.05367 -0.9823 -0.9879 -0.9952 -0.98609 -0.9902 -0.98609 -0.9902
## 10299: -0.05479 -0.9819 -0.9877 -0.9963 -0.98343 -0.9924 -0.98343 -0.9924
##           V227    V228     V240     V241    V253    V254    V266     V267
##     1: -0.2894 -0.1650 -0.03440 -0.16819 -0.4661 -0.4337 -0.2609 -0.12257
##     2: -0.1385 -0.1986 -0.14094 -0.21606 -0.3899 -0.4390 -0.1511 -0.02905
##     3: -0.1944 -0.2199 -0.09459 -0.29085 -0.3742 -0.4180 -0.2304  0.02543
##     4: -0.1295 -0.1739 -0.04934 -0.09012 -0.2365 -0.2294 -0.1513  0.19527
##     5: -0.1599 -0.1499 -0.02141 -0.04464 -0.2201 -0.2128 -0.2258  0.11029
##    ---                                                                   
## 10295: -0.9902 -0.9920 -0.98848 -0.98537 -0.9893 -0.9885 -0.9892 -0.98858
## 10296: -0.9868 -0.9906 -0.98444 -0.98241 -0.9848 -0.9869 -0.9838 -0.98429
## 10297: -0.9881 -0.9917 -0.98267 -0.98312 -0.9841 -0.9890 -0.9842 -0.98411
## 10298: -0.9910 -0.9934 -0.98276 -0.98128 -0.9874 -0.9913 -0.9888 -0.98633
## 10299: -0.9886 -0.9909 -0.97960 -0.97871 -0.9882 -0.9886 -0.9873 -0.98456
##           V268    V269     V270    V271    V345     V346    V347    V348
##     1: -0.3312 -0.3567 -0.19957 -0.1778 -0.2105 -0.26353 -0.5357 -0.2283
##     2: -0.2573 -0.2622 -0.02386 -0.3222 -0.1783 -0.12084 -0.4989 -0.1140
##     3: -0.3773 -0.2935 -0.05769 -0.2901 -0.1927 -0.10961 -0.5256 -0.2359
##     4: -0.3212 -0.2631  0.08786 -0.2170 -0.1834 -0.02597 -0.4874 -0.1323
##     5: -0.2049 -0.2268  0.11880 -0.1464 -0.2852 -0.01110 -0.4259 -0.1692
##    ---                                                                  
## 10295: -0.9907 -0.9883 -0.99183 -0.9880 -0.9890 -0.98610 -0.9910 -0.9908
## 10296: -0.9829 -0.9773 -0.99230 -0.9775 -0.9877 -0.98052 -0.9868 -0.9890
## 10297: -0.9872 -0.9773 -0.98942 -0.9820 -0.9876 -0.98122 -0.9889 -0.9890
## 10298: -0.9899 -0.9853 -0.99012 -0.9900 -0.9892 -0.98698 -0.9914 -0.9898
## 10299: -0.9876 -0.9766 -0.99125 -0.9871 -0.9899 -0.98151 -0.9880 -0.9916
##             V349    V350    V424     V425    V426    V427      V428
##     1: -0.124274 -0.6984 -0.1848 -0.19802 -0.3076 -0.3681 -0.115047
##     2:  0.027848 -0.5946 -0.2045 -0.24583 -0.3112 -0.4613 -0.009838
##     3: -0.005816 -0.6329 -0.3171 -0.20816 -0.1858 -0.4863  0.009727
##     4:  0.020367 -0.5528 -0.1622  0.02655 -0.1805 -0.4235  0.044652
##     5:  0.055777 -0.5102 -0.2371  0.04721 -0.2580 -0.4223  0.176016
##    ---                                                             
## 10295: -0.989857 -0.9891 -0.9894 -0.98326 -0.9958 -0.9954 -0.984995
## 10296: -0.986170 -0.9882 -0.9875 -0.97922 -0.9948 -0.9942 -0.974949
## 10297: -0.985860 -0.9918 -0.9860 -0.97836 -0.9948 -0.9919 -0.973621
## 10298: -0.987856 -0.9945 -0.9872 -0.97914 -0.9963 -0.9931 -0.971848
## 10299: -0.984423 -0.9898 -0.9870 -0.97823 -0.9962 -0.9936 -0.964543
##           V429     V503    V504    V516    V517      V529    V530    V542
##     1: -0.5653 -0.16681 -0.3996 -0.1540 -0.1847 -0.222176 -0.2736 -0.4318
##     2: -0.4899 -0.07928 -0.4230 -0.1784 -0.2307 -0.268280 -0.3146 -0.4282
##     3: -0.4694 -0.15631 -0.4369 -0.1494 -0.3213 -0.308671 -0.4014 -0.4010
##     4: -0.3766 -0.10438 -0.3762 -0.1322 -0.2326 -0.060131 -0.2746 -0.2177
##     5: -0.3886 -0.12320 -0.3879 -0.1161 -0.2010 -0.003821 -0.2462 -0.1876
##    ---                                                                   
## 10295: -0.9975 -0.99175 -0.9921 -0.9910 -0.9924 -0.985384 -0.9878 -0.9890
## 10296: -0.9969 -0.98726 -0.9884 -0.9891 -0.9914 -0.981451 -0.9862 -0.9861
## 10297: -0.9972 -0.98658 -0.9858 -0.9906 -0.9921 -0.982940 -0.9861 -0.9874
## 10298: -0.9981 -0.99075 -0.9904 -0.9937 -0.9915 -0.983046 -0.9830 -0.9908
## 10299: -0.9982 -0.99268 -0.9923 -0.9904 -0.9902 -0.979559 -0.9816 -0.9876
##           V543
##     1: -0.4764
##     2: -0.4929
##     3: -0.4819
##     4: -0.2992
##     5: -0.3003
##    ---        
## 10295: -0.9882
## 10296: -0.9885
## 10297: -0.9920
## 10298: -0.9921
## 10299: -0.9903
```

**Reorganize and rename the first 3 columns. Remove the one with activity numbers**


```r
mergedData <- mergedData[, activity:=subject]
mergedData <- mergedData[, subject := NULL]
setnames(mergedData, 1:2, c("subject", "activity"))
```

```r
mergedData
```

```
##        subject activity     V1        V2       V3      V4       V5      V6
##     1:       1  WALKING 0.2820 -0.037696 -0.13490 -0.3283 -0.13715 -0.1891
##     2:       1  WALKING 0.2558 -0.064550 -0.09519 -0.2292  0.01651 -0.2603
##     3:       1  WALKING 0.2549  0.003815 -0.12366 -0.2752  0.01308 -0.2844
##     4:       1  WALKING 0.3434 -0.014446 -0.16738 -0.2299  0.17391 -0.2134
##     5:       1  WALKING 0.2762 -0.029638 -0.14262 -0.2266  0.16429 -0.1225
##    ---                                                                    
## 10295:      24   LAYING 0.2609 -0.017322 -0.10301 -0.9887 -0.99093 -0.9891
## 10296:      24   LAYING 0.2842 -0.018150 -0.10983 -0.9792 -0.98931 -0.9791
## 10297:      24   LAYING 0.2885 -0.016603 -0.11479 -0.9793 -0.98757 -0.9838
## 10298:      24   LAYING 0.2549 -0.017042 -0.10342 -0.9865 -0.98894 -0.9900
## 10299:      24   LAYING 0.2705 -0.017184 -0.10674 -0.9795 -0.98884 -0.9872
##            V41     V42      V43     V44     V45     V46      V81       V82
##     1:  0.9453 -0.2459 -0.03216 -0.9840 -0.9289 -0.9326 -0.15649 -0.142853
##     2:  0.9411 -0.2520 -0.03288 -0.9840 -0.9175 -0.9491 -0.20755  0.357843
##     3:  0.9464 -0.2643 -0.02558 -0.9628 -0.9561 -0.9719  0.20160  0.417082
##     4:  0.9524 -0.2598 -0.02613 -0.9811 -0.9644 -0.9643  0.33608 -0.464144
##     5:  0.9471 -0.2571 -0.02842 -0.9769 -0.9886 -0.9604 -0.23562 -0.111777
##    ---                                                                    
## 10295: -0.2536  0.7478  0.66240 -0.9847 -0.9981 -0.9935  0.07362  0.008726
## 10296: -0.2580  0.7478  0.66377 -0.9811 -0.9986 -0.9887  0.08270  0.020530
## 10297: -0.2564  0.7474  0.66311 -0.9758 -0.9991 -0.9832  0.07114  0.016184
## 10298: -0.2540  0.7476  0.66097 -0.9804 -0.9985 -0.9900  0.07750  0.003795
## 10299: -0.2599  0.7476  0.66230 -0.9787 -0.9986 -0.9895  0.07728  0.007349
##              V83     V84      V85     V86      V121     V122     V123
##     1: -0.113079 -0.1838 -0.17046 -0.6138 -0.479730  0.08203 0.256443
##     2: -0.452401 -0.1084 -0.01869 -0.5476  0.094091 -0.30915 0.086441
##     3:  0.139078 -0.1777 -0.02960 -0.5795  0.211201 -0.27291 0.101986
##     4: -0.005026 -0.1205  0.02866 -0.5215  0.096082 -0.16339 0.025859
##     5:  0.172655 -0.1924  0.05398 -0.4693  0.008742  0.01166 0.004175
##    ---                                                               
## 10295:  0.005088 -0.9894 -0.98726 -0.9909 -0.028800 -0.05654 0.087262
## 10296: -0.005393 -0.9878 -0.98230 -0.9883 -0.027928 -0.08138 0.087231
## 10297: -0.004438 -0.9877 -0.98261 -0.9910 -0.027629 -0.06972 0.086456
## 10298:  0.006643 -0.9890 -0.98696 -0.9936 -0.028801 -0.06642 0.089199
## 10299: -0.002991 -0.9903 -0.98219 -0.9897 -0.027950 -0.07382 0.086261
##           V124     V125    V126     V161     V162     V163    V164    V165
##     1: -0.3235 -0.14194 -0.4566  0.09425 -0.47621 -0.14213 -0.3457 -0.4867
##     2: -0.3993 -0.08842 -0.4022  0.16674 -0.03380 -0.08926 -0.2499 -0.4537
##     3: -0.4454 -0.06308 -0.3471 -0.16323 -0.00556 -0.23155 -0.2642 -0.4247
##     4: -0.3604  0.04233 -0.2761 -0.05463  0.34029 -0.26967 -0.1021 -0.2434
##     5: -0.3776  0.13372 -0.3081 -0.07567  0.17147  0.13645 -0.1291 -0.1901
##    ---                                                                    
## 10295: -0.9938 -0.98429 -0.9968 -0.09770 -0.04622 -0.05506 -0.9855 -0.9875
## 10296: -0.9924 -0.97648 -0.9960 -0.09700 -0.03599 -0.05730 -0.9829 -0.9830
## 10297: -0.9905 -0.97531 -0.9962 -0.09898 -0.03347 -0.05350 -0.9797 -0.9842
## 10298: -0.9916 -0.97440 -0.9974 -0.09788 -0.05344 -0.05367 -0.9823 -0.9879
## 10299: -0.9919 -0.96909 -0.9974 -0.09848 -0.04041 -0.05479 -0.9819 -0.9877
##           V166     V201    V202     V214    V215    V227    V228     V240
##     1: -0.4215 -0.22456 -0.2380 -0.22456 -0.2380 -0.2894 -0.1650 -0.03440
##     2: -0.3698 -0.12650 -0.2134 -0.12650 -0.2134 -0.1385 -0.1986 -0.14094
##     3: -0.3425 -0.16010 -0.2576 -0.16010 -0.2576 -0.1944 -0.2199 -0.09459
##     4: -0.3116 -0.07351 -0.1951 -0.07351 -0.1951 -0.1295 -0.1739 -0.04934
##     5: -0.4183 -0.04949 -0.2110 -0.04949 -0.2110 -0.1599 -0.1499 -0.02141
##    ---                                                                   
## 10295: -0.9949 -0.98884 -0.9918 -0.98884 -0.9918 -0.9902 -0.9920 -0.98848
## 10296: -0.9937 -0.98175 -0.9874 -0.98175 -0.9874 -0.9868 -0.9906 -0.98444
## 10297: -0.9945 -0.98244 -0.9854 -0.98244 -0.9854 -0.9881 -0.9917 -0.98267
## 10298: -0.9952 -0.98609 -0.9902 -0.98609 -0.9902 -0.9910 -0.9934 -0.98276
## 10299: -0.9963 -0.98343 -0.9924 -0.98343 -0.9924 -0.9886 -0.9909 -0.97960
##            V241    V253    V254    V266     V267    V268    V269     V270
##     1: -0.16819 -0.4661 -0.4337 -0.2609 -0.12257 -0.3312 -0.3567 -0.19957
##     2: -0.21606 -0.3899 -0.4390 -0.1511 -0.02905 -0.2573 -0.2622 -0.02386
##     3: -0.29085 -0.3742 -0.4180 -0.2304  0.02543 -0.3773 -0.2935 -0.05769
##     4: -0.09012 -0.2365 -0.2294 -0.1513  0.19527 -0.3212 -0.2631  0.08786
##     5: -0.04464 -0.2201 -0.2128 -0.2258  0.11029 -0.2049 -0.2268  0.11880
##    ---                                                                   
## 10295: -0.98537 -0.9893 -0.9885 -0.9892 -0.98858 -0.9907 -0.9883 -0.99183
## 10296: -0.98241 -0.9848 -0.9869 -0.9838 -0.98429 -0.9829 -0.9773 -0.99230
## 10297: -0.98312 -0.9841 -0.9890 -0.9842 -0.98411 -0.9872 -0.9773 -0.98942
## 10298: -0.98128 -0.9874 -0.9913 -0.9888 -0.98633 -0.9899 -0.9853 -0.99012
## 10299: -0.97871 -0.9882 -0.9886 -0.9873 -0.98456 -0.9876 -0.9766 -0.99125
##           V271    V345     V346    V347    V348      V349    V350    V424
##     1: -0.1778 -0.2105 -0.26353 -0.5357 -0.2283 -0.124274 -0.6984 -0.1848
##     2: -0.3222 -0.1783 -0.12084 -0.4989 -0.1140  0.027848 -0.5946 -0.2045
##     3: -0.2901 -0.1927 -0.10961 -0.5256 -0.2359 -0.005816 -0.6329 -0.3171
##     4: -0.2170 -0.1834 -0.02597 -0.4874 -0.1323  0.020367 -0.5528 -0.1622
##     5: -0.1464 -0.2852 -0.01110 -0.4259 -0.1692  0.055777 -0.5102 -0.2371
##    ---                                                                   
## 10295: -0.9880 -0.9890 -0.98610 -0.9910 -0.9908 -0.989857 -0.9891 -0.9894
## 10296: -0.9775 -0.9877 -0.98052 -0.9868 -0.9890 -0.986170 -0.9882 -0.9875
## 10297: -0.9820 -0.9876 -0.98122 -0.9889 -0.9890 -0.985860 -0.9918 -0.9860
## 10298: -0.9900 -0.9892 -0.98698 -0.9914 -0.9898 -0.987856 -0.9945 -0.9872
## 10299: -0.9871 -0.9899 -0.98151 -0.9880 -0.9916 -0.984423 -0.9898 -0.9870
##            V425    V426    V427      V428    V429     V503    V504    V516
##     1: -0.19802 -0.3076 -0.3681 -0.115047 -0.5653 -0.16681 -0.3996 -0.1540
##     2: -0.24583 -0.3112 -0.4613 -0.009838 -0.4899 -0.07928 -0.4230 -0.1784
##     3: -0.20816 -0.1858 -0.4863  0.009727 -0.4694 -0.15631 -0.4369 -0.1494
##     4:  0.02655 -0.1805 -0.4235  0.044652 -0.3766 -0.10438 -0.3762 -0.1322
##     5:  0.04721 -0.2580 -0.4223  0.176016 -0.3886 -0.12320 -0.3879 -0.1161
##    ---                                                                    
## 10295: -0.98326 -0.9958 -0.9954 -0.984995 -0.9975 -0.99175 -0.9921 -0.9910
## 10296: -0.97922 -0.9948 -0.9942 -0.974949 -0.9969 -0.98726 -0.9884 -0.9891
## 10297: -0.97836 -0.9948 -0.9919 -0.973621 -0.9972 -0.98658 -0.9858 -0.9906
## 10298: -0.97914 -0.9963 -0.9931 -0.971848 -0.9981 -0.99075 -0.9904 -0.9937
## 10299: -0.97823 -0.9962 -0.9936 -0.964543 -0.9982 -0.99268 -0.9923 -0.9904
##           V517      V529    V530    V542    V543
##     1: -0.1847 -0.222176 -0.2736 -0.4318 -0.4764
##     2: -0.2307 -0.268280 -0.3146 -0.4282 -0.4929
##     3: -0.3213 -0.308671 -0.4014 -0.4010 -0.4819
##     4: -0.2326 -0.060131 -0.2746 -0.2177 -0.2992
##     5: -0.2010 -0.003821 -0.2462 -0.1876 -0.3003
##    ---                                          
## 10295: -0.9924 -0.985384 -0.9878 -0.9890 -0.9882
## 10296: -0.9914 -0.981451 -0.9862 -0.9861 -0.9885
## 10297: -0.9921 -0.982940 -0.9861 -0.9874 -0.9920
## 10298: -0.9915 -0.983046 -0.9830 -0.9908 -0.9921
## 10299: -0.9902 -0.979559 -0.9816 -0.9876 -0.9903
```
***

#### Label the dataset with descriptive variable names

***


```r
descriptiveName <- features$featureName
setnames(mergedData, 3:68, descriptiveName)
```

```r
names(mergedData)
```

```
##  [1] "subject"                     "activity"                   
##  [3] "tBodyAcc-mean()-X"           "tBodyAcc-mean()-Y"          
##  [5] "tBodyAcc-mean()-Z"           "tBodyAcc-std()-X"           
##  [7] "tBodyAcc-std()-Y"            "tBodyAcc-std()-Z"           
##  [9] "tGravityAcc-mean()-X"        "tGravityAcc-mean()-Y"       
## [11] "tGravityAcc-mean()-Z"        "tGravityAcc-std()-X"        
## [13] "tGravityAcc-std()-Y"         "tGravityAcc-std()-Z"        
## [15] "tBodyAccJerk-mean()-X"       "tBodyAccJerk-mean()-Y"      
## [17] "tBodyAccJerk-mean()-Z"       "tBodyAccJerk-std()-X"       
## [19] "tBodyAccJerk-std()-Y"        "tBodyAccJerk-std()-Z"       
## [21] "tBodyGyro-mean()-X"          "tBodyGyro-mean()-Y"         
## [23] "tBodyGyro-mean()-Z"          "tBodyGyro-std()-X"          
## [25] "tBodyGyro-std()-Y"           "tBodyGyro-std()-Z"          
## [27] "tBodyGyroJerk-mean()-X"      "tBodyGyroJerk-mean()-Y"     
## [29] "tBodyGyroJerk-mean()-Z"      "tBodyGyroJerk-std()-X"      
## [31] "tBodyGyroJerk-std()-Y"       "tBodyGyroJerk-std()-Z"      
## [33] "tBodyAccMag-mean()"          "tBodyAccMag-std()"          
## [35] "tGravityAccMag-mean()"       "tGravityAccMag-std()"       
## [37] "tBodyAccJerkMag-mean()"      "tBodyAccJerkMag-std()"      
## [39] "tBodyGyroMag-mean()"         "tBodyGyroMag-std()"         
## [41] "tBodyGyroJerkMag-mean()"     "tBodyGyroJerkMag-std()"     
## [43] "fBodyAcc-mean()-X"           "fBodyAcc-mean()-Y"          
## [45] "fBodyAcc-mean()-Z"           "fBodyAcc-std()-X"           
## [47] "fBodyAcc-std()-Y"            "fBodyAcc-std()-Z"           
## [49] "fBodyAccJerk-mean()-X"       "fBodyAccJerk-mean()-Y"      
## [51] "fBodyAccJerk-mean()-Z"       "fBodyAccJerk-std()-X"       
## [53] "fBodyAccJerk-std()-Y"        "fBodyAccJerk-std()-Z"       
## [55] "fBodyGyro-mean()-X"          "fBodyGyro-mean()-Y"         
## [57] "fBodyGyro-mean()-Z"          "fBodyGyro-std()-X"          
## [59] "fBodyGyro-std()-Y"           "fBodyGyro-std()-Z"          
## [61] "fBodyAccMag-mean()"          "fBodyAccMag-std()"          
## [63] "fBodyBodyAccJerkMag-mean()"  "fBodyBodyAccJerkMag-std()"  
## [65] "fBodyBodyGyroMag-mean()"     "fBodyBodyGyroMag-std()"     
## [67] "fBodyBodyGyroJerkMag-mean()" "fBodyBodyGyroJerkMag-std()"
```

***

#### Further tidy the dataset by using a long form

***

**Melt the 66-feature columns into one column**


```r
setkey(mergedData, subject, activity)
mergedData <- melt(mergedData, key(mergedData), variable.name = "feature")
```

```r
mergedData
```

```
##         subject         activity                    feature   value
##      1:       1           LAYING          tBodyAcc-mean()-X  0.4035
##      2:       1           LAYING          tBodyAcc-mean()-X  0.2784
##      3:       1           LAYING          tBodyAcc-mean()-X  0.2766
##      4:       1           LAYING          tBodyAcc-mean()-X  0.2796
##      5:       1           LAYING          tBodyAcc-mean()-X  0.2765
##     ---                                                            
## 679730:      30 WALKING_UPSTAIRS fBodyBodyGyroJerkMag-std() -0.7240
## 679731:      30 WALKING_UPSTAIRS fBodyBodyGyroJerkMag-std() -0.7712
## 679732:      30 WALKING_UPSTAIRS fBodyBodyGyroJerkMag-std() -0.7264
## 679733:      30 WALKING_UPSTAIRS fBodyBodyGyroJerkMag-std() -0.6894
## 679734:      30 WALKING_UPSTAIRS fBodyBodyGyroJerkMag-std() -0.7451
```

**Now the single feature column contains multiple types of measurement and needs to be split into multiple columns.**


```r
s <- mergedData$feature
mergedData$domain <- ifelse(grepl("^t", s), "Time", 
                            ifelse(grepl("^f", s), "Freq", NA))
mergedData$instrument <- ifelse(grepl("Acc", s, ignore.case=TRUE), "Accelerometer",
                                ifelse(grepl("Gyro", s, ignore.case=TRUE), "Gyroscope", NA))
mergedData$acceleration <- ifelse(grepl("Body", s, ignore.case=TRUE), "Body",
                                  ifelse(grepl("Gravity", s, ignore.case=TRUE), "Gravity", NA))                        
mergedData$jerk <- ifelse(grepl("Jerk", s, ignore.case=TRUE), "Jerk", NA)
mergedData$magnitude <- ifelse(grepl("Mag", s, ignore.case=TRUE), "Magnitude", NA)                        
mergedData$axis <- ifelse(grepl("X$", s), "X", 
                            ifelse(grepl("Y$", s), "Y", 
                                   ifelse(grepl("Z$", s), "Z", NA)))
mergedData$statistics <- ifelse(grepl("mean", s), "Mean",
                                ifelse(grepl("std", s), "Standard Deviation", NA))
```

```r
mergedData
```

```
##         subject         activity                    feature   value domain
##      1:       1           LAYING          tBodyAcc-mean()-X  0.4035   Time
##      2:       1           LAYING          tBodyAcc-mean()-X  0.2784   Time
##      3:       1           LAYING          tBodyAcc-mean()-X  0.2766   Time
##      4:       1           LAYING          tBodyAcc-mean()-X  0.2796   Time
##      5:       1           LAYING          tBodyAcc-mean()-X  0.2765   Time
##     ---                                                                   
## 679730:      30 WALKING_UPSTAIRS fBodyBodyGyroJerkMag-std() -0.7240   Freq
## 679731:      30 WALKING_UPSTAIRS fBodyBodyGyroJerkMag-std() -0.7712   Freq
## 679732:      30 WALKING_UPSTAIRS fBodyBodyGyroJerkMag-std() -0.7264   Freq
## 679733:      30 WALKING_UPSTAIRS fBodyBodyGyroJerkMag-std() -0.6894   Freq
## 679734:      30 WALKING_UPSTAIRS fBodyBodyGyroJerkMag-std() -0.7451   Freq
##            instrument acceleration jerk magnitude axis         statistics
##      1: Accelerometer         Body   NA        NA    X               Mean
##      2: Accelerometer         Body   NA        NA    X               Mean
##      3: Accelerometer         Body   NA        NA    X               Mean
##      4: Accelerometer         Body   NA        NA    X               Mean
##      5: Accelerometer         Body   NA        NA    X               Mean
##     ---                                                                  
## 679730:     Gyroscope         Body Jerk Magnitude   NA Standard Deviation
## 679731:     Gyroscope         Body Jerk Magnitude   NA Standard Deviation
## 679732:     Gyroscope         Body Jerk Magnitude   NA Standard Deviation
## 679733:     Gyroscope         Body Jerk Magnitude   NA Standard Deviation
## 679734:     Gyroscope         Body Jerk Magnitude   NA Standard Deviation
```

**Remove the redundant "feature" column and move the "value" column to the end**


```r
mergedData <- mergedData[, feature := NULL]
setcolorder(mergedData, c(1, 2, 4:10, 3))
```

```r
mergedData
```

```
##         subject         activity domain    instrument acceleration jerk
##      1:       1           LAYING   Time Accelerometer         Body   NA
##      2:       1           LAYING   Time Accelerometer         Body   NA
##      3:       1           LAYING   Time Accelerometer         Body   NA
##      4:       1           LAYING   Time Accelerometer         Body   NA
##      5:       1           LAYING   Time Accelerometer         Body   NA
##     ---                                                                
## 679730:      30 WALKING_UPSTAIRS   Freq     Gyroscope         Body Jerk
## 679731:      30 WALKING_UPSTAIRS   Freq     Gyroscope         Body Jerk
## 679732:      30 WALKING_UPSTAIRS   Freq     Gyroscope         Body Jerk
## 679733:      30 WALKING_UPSTAIRS   Freq     Gyroscope         Body Jerk
## 679734:      30 WALKING_UPSTAIRS   Freq     Gyroscope         Body Jerk
##         magnitude axis         statistics   value
##      1:        NA    X               Mean  0.4035
##      2:        NA    X               Mean  0.2784
##      3:        NA    X               Mean  0.2766
##      4:        NA    X               Mean  0.2796
##      5:        NA    X               Mean  0.2765
##     ---                                          
## 679730: Magnitude   NA Standard Deviation -0.7240
## 679731: Magnitude   NA Standard Deviation -0.7712
## 679732: Magnitude   NA Standard Deviation -0.7264
## 679733: Magnitude   NA Standard Deviation -0.6894
## 679734: Magnitude   NA Standard Deviation -0.7451
```

***

#### Create a separate independant tidy data set with the average of each variable for each activity and each subject

***

Take each combination of the parameters specified in "setkey" and compute the average of the measurements and the number of the measurements.

There are a total of 66 combinations of parameters. Each combination is equivalent to one feature variable of the dataset before it was transformed to a long form. 


```r
setkey(mergedData, subject, activity, domain, instrument, acceleration, 
       jerk, magnitude, axis, statistics)
mergedDataTidy <- mergedData[, list(number_of_measurement = .N, average = mean(value)), by = key(mergedData)]
```

```r
mergedDataTidy
```

```
##        subject         activity domain    instrument acceleration jerk
##     1:       1           LAYING   Freq Accelerometer         Body   NA
##     2:       1           LAYING   Freq Accelerometer         Body   NA
##     3:       1           LAYING   Freq Accelerometer         Body   NA
##     4:       1           LAYING   Freq Accelerometer         Body   NA
##     5:       1           LAYING   Freq Accelerometer         Body   NA
##    ---                                                                
## 11876:      30 WALKING_UPSTAIRS   Time     Gyroscope         Body Jerk
## 11877:      30 WALKING_UPSTAIRS   Time     Gyroscope         Body Jerk
## 11878:      30 WALKING_UPSTAIRS   Time     Gyroscope         Body Jerk
## 11879:      30 WALKING_UPSTAIRS   Time     Gyroscope         Body Jerk
## 11880:      30 WALKING_UPSTAIRS   Time     Gyroscope         Body Jerk
##        magnitude axis         statistics number_of_measurement  average
##     1:        NA    X               Mean                    50 -0.93910
##     2:        NA    X Standard Deviation                    50 -0.92444
##     3:        NA    Y               Mean                    50 -0.86707
##     4:        NA    Y Standard Deviation                    50 -0.83363
##     5:        NA    Z               Mean                    50 -0.88267
##    ---                                                                 
## 11876:        NA    Y Standard Deviation                    65 -0.74334
## 11877:        NA    Z               Mean                    65 -0.03642
## 11878:        NA    Z Standard Deviation                    65 -0.66515
## 11879: Magnitude   NA               Mean                    65 -0.71878
## 11880: Magnitude   NA Standard Deviation                    65 -0.77444
```

***

**Write the new tidy dataset to a text file**


```r
write.table(mergedDataTidy, "tidy_data.txt", row.names = FALSE)
```

***

### *Please see the README file for additional information*

***






